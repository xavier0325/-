{"version":3,"sources":["webpack:///src/components/echarts/tranSort.vue","webpack:///./src/components/echarts/tranSort.vue?2b57","webpack:///./src/components/echarts/tranSort.vue","webpack:///src/components/bmap/tranmap.vue","webpack:///./src/components/bmap/tranmap.vue?1028","webpack:///./src/components/bmap/tranmap.vue"],"names":["tranSort","props","data","chartObj","yData","tranData","watch","wsData","val","this","tranmapData","map","item","i","name","value","setOption","yAxis","series","type","mounted","myChartDom","common","getById","tsContainer","myChart","$echarts","init","drawChart","methods","title","text","left","textStyle","color","tooltip","grid","show","bottom","xAxis","max","axisLabel","axisTick","inverse","animationDuration","animationDurationUpdate","legend","top","realtimeSort","label","position","valueAnimation","itemStyle","borderRadius","animationEasing","animationEasingUpdate","echarts_tranSort","render","_h","$createElement","_self","_c","attrs","id","staticRenderFns","tranmap","components","__webpack_require__","normalizeComponent","ssrContext","startPoint","x","y","zoom","searchList","searchWord","path","socket","myValue","_this","BMap","Map","wsInit","centerAndZoom","Point","setCurrentCity","enableScrollWheelZoom","ctrTraffic","BMapLib","TrafficControl","showPanel","ctrNavigation","NavigationControl","anchor","BMAP_ANCHOR_TOP_RIGHT","BMAP_NAVIGATION_CONTROL_SMALL","offset","Size","ctrScale","ScaleControl","BMAP_ANCHOR_TOP_LEFT","ctrMapType","MapTypeControl","mapTypes","BMAP_NORMAL_MAP","BMAP_HYBRID_MAP","ctrOverView","OverviewMapControl","isOpen","addControl","setAnchor","showTraffic","Autocomplete","input","location","onSearchComplete","AutocompleteResult","arr","Cr","temp","splice","length","push","concat","setPlace","clearOverlays","local","LocalSearch","pp","getResults","getPoi","point","addOverlay","Marker","search","searchInput","onkeydown","e","keyCode","target","baseURI","match","trim","searchBtn","addEventListener","tipBox","innerText","destroyed","onclose","wsClose","checkValue","WebSocket","onopen","wsOpen","onerror","wsError","onmessage","wsGetMsg","console","log","send","msg","JSON","parse","wsSend","content","close","undefined","bmap_tranmap","_vm","_v","directives","rawName","expression","size","placeholder","domProps","on","$event","composing","staticClass","t","viewBox","version","xmlns","p-id","width","height","d","fill","_l","index","key","staticStyle","font-weight","_s","province","city","district","street","business","tranmap_Component","tranmap_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/4.1088f651006534e38d99.js","sourcesContent":["<template>\r\n  <div id=\"tsContainer\"></div>\r\n</template>\r\n\r\n<script>\r\nimport common from \"../../api/common.js\";\r\nexport default {\r\n  props: [\"wsData\"],\r\n  data() {\r\n    return {\r\n      chartObj: null,\r\n      yData: [],\r\n      tranData: [],\r\n    };\r\n  },\r\n  watch: {\r\n    wsData(val) {\r\n      // console.log(val);\r\n      this.yData = val.tranmapData.map(function (item, i) {\r\n        return item.name;\r\n      });\r\n      this.tranData = val.tranmapData.map(function (item, i) {\r\n        return item.value;\r\n      });\r\n      this.chartObj.setOption({\r\n        yAxis: {\r\n          data: this.yData,\r\n        },\r\n        series: [\r\n          {\r\n            type: \"bar\",\r\n            data: this.tranData,\r\n          },\r\n        ],\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    var _this = this;\r\n    var myChartDom = common.getById(tsContainer);\r\n    var myChart = this.$echarts.init(myChartDom);\r\n    this.chartObj = myChart;\r\n\r\n    myChart.setOption(this.drawChart());\r\n  },\r\n  methods: {\r\n    drawChart() {\r\n      return {\r\n        title: {\r\n          text: \"top10交通道路拥堵指数实时排序\",\r\n          left: \"center\",\r\n          textStyle: {\r\n            color: \"#000\",\r\n          },\r\n        },\r\n        tooltip: {},\r\n        grid: {\r\n          show: true,\r\n          bottom: \"6%\",\r\n        },\r\n        xAxis: {\r\n          max: \"dataMax\",\r\n          axisLabel: {\r\n            color: \"#000\",\r\n          },\r\n          axisTick: {\r\n            show: true,\r\n          },\r\n        },\r\n        yAxis: {\r\n          type: \"category\",\r\n          data: this.yData,\r\n          inverse: true,\r\n          axisLabel: {\r\n            color: \"#000\",\r\n          },\r\n          animationDuration: 300,\r\n          animationDurationUpdate: 300,\r\n          max: 9,\r\n        },\r\n        legend: {\r\n          show: true,\r\n          top: \"6%\",\r\n        },\r\n        series: [\r\n          {\r\n            realtimeSort: true,\r\n            name: \"交通道路拥堵指数\",\r\n            type: \"bar\",\r\n            data: this.tranData,\r\n            label: {\r\n              show: true,\r\n              position: \"right\",\r\n              valueAnimation: true,\r\n            },\r\n            itemStyle: {\r\n              borderRadius: [0, 10, 10, 0],\r\n            },\r\n          },\r\n        ],\r\n        animationDuration: 0,\r\n        animationDurationUpdate: 1000,\r\n        animationEasing: \"linear\",\r\n        animationEasingUpdate: \"linear\",\r\n      };\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#tsContainer {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/echarts/tranSort.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"tsContainer\"}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-49f77254\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/echarts/tranSort.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-49f77254\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tranSort.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tranSort.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tranSort.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-49f77254\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./tranSort.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-49f77254\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/echarts/tranSort.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n    <div id=\"tranmap\"></div>\r\n    <div id=\"tranSortBox\">\r\n      <tranSort :wsData=\"wsData\"></tranSort>\r\n    </div>\r\n    <div id=\"searchBox\">\r\n      <input\r\n        type=\"search\"\r\n        id=\"searchInput\"\r\n        size=\"20\"\r\n        placeholder=\"请输入检索地点\"\r\n        @input=\"checkValue\"\r\n        v-model=\"searchWord\"\r\n      />\r\n      <label id=\"searchBtn\">\r\n        <svg\r\n          t=\"1648187269632\"\r\n          class=\"icon\"\r\n          viewBox=\"0 0 1024 1024\"\r\n          version=\"1.1\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          p-id=\"5334\"\r\n          width=\"18\"\r\n          height=\"18\"\r\n        >\r\n          <path\r\n            d=\"M1004.8 915.2l-243.2-243.2c0 0-6.4-6.4-6.4-6.4C800 595.2 832 505.6 832 416 832 185.6 646.4 0 416 0S0 185.6 0 416 185.6 832 416 832c89.6 0 179.2-32 243.2-83.2 0 6.4 6.4 6.4 6.4 6.4l243.2 243.2c25.6 25.6 70.4 25.6 96 6.4C1030.4 979.2 1030.4 940.8 1004.8 915.2zM64 416C64 224 224 64 416 64S768 224 768 416 608 768 416 768 64 608 64 416z\"\r\n            p-id=\"5335\"\r\n            fill=\"#aaaaaa\"\r\n          ></path>\r\n        </svg>\r\n      </label>\r\n      <div id=\"tipBox\" v-show=\"searchList.length\">\r\n        <span\r\n          class=\"searchItem\"\r\n          v-for=\"(item, index) in searchList\"\r\n          :key=\"index\"\r\n        >\r\n          <svg\r\n            t=\"1648187269632\"\r\n            class=\"icon\"\r\n            viewBox=\"0 0 1024 1024\"\r\n            version=\"1.1\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            p-id=\"5334\"\r\n            width=\"14\"\r\n            height=\"14\"\r\n          >\r\n            <path\r\n              d=\"M1004.8 915.2l-243.2-243.2c0 0-6.4-6.4-6.4-6.4C800 595.2 832 505.6 832 416 832 185.6 646.4 0 416 0S0 185.6 0 416 185.6 832 416 832c89.6 0 179.2-32 243.2-83.2 0 6.4 6.4 6.4 6.4 6.4l243.2 243.2c25.6 25.6 70.4 25.6 96 6.4C1030.4 979.2 1030.4 940.8 1004.8 915.2zM64 416C64 224 224 64 416 64S768 224 768 416 608 768 416 768 64 608 64 416z\"\r\n              p-id=\"5335\"\r\n              fill=\"#aaaaaa\"\r\n            ></path>\r\n          </svg>\r\n          <b style=\"font-weight: bolder\">{{ item.province }}{{ item.city }}</b\r\n          >{{ item.district }}{{ item.street }}{{ item.business }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport common from \"../../api/common.js\";\r\nimport tranSort from \"../echarts/tranSort.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    tranSort,\r\n  },\r\n  data() {\r\n    return {\r\n      startPoint: {\r\n        x: 112.870634,\r\n        y: 27.887929,\r\n      },\r\n      zoom: 15,\r\n      searchList: [],\r\n      searchWord: \"\",\r\n      path: \"ws://localhost:8888/tranmap/tranmap_ws\",\r\n      socket: \"\",\r\n      wsData: {}\r\n    };\r\n  },\r\n  mounted() {\r\n    var _this = this;\r\n    // 百度地图API功能\r\n    var map = new BMap.Map(\"tranmap\"); // 创建Map实例\r\n    var myValue; //检索地点值\r\n    this.wsInit();  //启动WebSocket服务\r\n\r\n    map.centerAndZoom(\r\n      new BMap.Point(this.startPoint.x, this.startPoint.y),\r\n      this.zoom\r\n    ); // 初始化地图,设置中心点坐标和地图级别\r\n    map.setCurrentCity(\"湘潭\"); // 设置地图显示的城市\r\n    map.enableScrollWheelZoom(true); //开启鼠标滚轮缩放\r\n    // map.setMapStyle(this.styleJson)  //地图样式\r\n    var ctrTraffic = new BMapLib.TrafficControl({\r\n      //交通流量控件\r\n      showPanel: true, //是否显示路况提示面板\r\n    });\r\n    var ctrNavigation = new BMap.NavigationControl({\r\n      //平移和缩放控件\r\n      anchor: BMAP_ANCHOR_TOP_RIGHT,\r\n      type: BMAP_NAVIGATION_CONTROL_SMALL,\r\n      offset: new BMap.Size(10, 50),\r\n    });\r\n    var ctrScale = new BMap.ScaleControl({\r\n      //比例尺控件\r\n      anchor: BMAP_ANCHOR_TOP_LEFT,\r\n      offset: new BMap.Size(100, 5),\r\n    });\r\n    var ctrMapType = new BMap.MapTypeControl({\r\n      //地图类型控件\r\n      anchor: BMAP_ANCHOR_TOP_RIGHT,\r\n      mapTypes: [BMAP_NORMAL_MAP, BMAP_HYBRID_MAP], //普通街道视图,卫星和路网的混合视图\r\n    });\r\n    var ctrOverView = new BMap.OverviewMapControl({\r\n      //缩略图控件\r\n      anchor: BMAP_ANCHOR_TOP_RIGHT,\r\n      offset: new BMap.Size(10, 500),\r\n      isOpen: true,\r\n    });\r\n    map.addControl(ctrTraffic);\r\n    map.addControl(ctrNavigation);\r\n    map.addControl(ctrScale);\r\n    map.addControl(ctrMapType);\r\n    map.addControl(ctrOverView);\r\n    ctrTraffic.setAnchor(BMAP_ANCHOR_TOP_LEFT); //位置\r\n    ctrTraffic.showTraffic(); //默认开启路况\r\n\r\n    //地点检索功能\r\n    var ac = new BMap.Autocomplete({\r\n      //实例化一个自动完成对象\r\n      input: \"searchInput\",\r\n      location: map,\r\n      onSearchComplete: function (AutocompleteResult) {\r\n        // console.log(ac.getResults())\r\n        // console.log(AutocompleteResult);\r\n        var arr = AutocompleteResult.Cr;\r\n        var temp = [];\r\n        _this.searchList.splice(0, _this.searchList.length);\r\n        for (var i = 0; i < arr.length; i++) {\r\n          temp.push(arr[i]);\r\n        }\r\n        // console.log(temp);\r\n        _this.searchList = [].concat(temp);\r\n      },\r\n    });\r\n\r\n    //设置地点\r\n    function setPlace() {\r\n      map.clearOverlays(); //清除地图上所有覆盖物\r\n      function myFun() {\r\n        var pp = local.getResults().getPoi(0).point; //获取第一个智能搜索的结果\r\n        map.centerAndZoom(pp, _this.zoom);\r\n        map.addOverlay(new BMap.Marker(pp)); //添加标注\r\n      }\r\n      var local = new BMap.LocalSearch(map, {\r\n        //智能搜索\r\n        onSearchComplete: myFun,\r\n      });\r\n      local.search(myValue);\r\n    }\r\n\r\n    common.getById(searchInput).onkeydown = function (e) {\r\n      //通过输入后回车检索\r\n      if (e.keyCode === 13 && e.target.baseURI.match(/tranmap$/i)) {\r\n        if (_this.searchWord.trim() === \"\") {\r\n          _this.searchList.splice(0, _this.searchList.length);\r\n          map.centerAndZoom(\r\n            new BMap.Point(_this.startPoint.x, _this.startPoint.y),\r\n            _this.zoom\r\n          ); //空输入时回到最开始地图位置状态\r\n        } else {\r\n          _this.searchList.splice(0, _this.searchList.length);\r\n          myValue = _this.searchWord;\r\n          setPlace();\r\n        }\r\n      }\r\n    };\r\n    common.getById(searchBtn).addEventListener(\"click\", function () {\r\n      //通过搜索按钮点击检索\r\n      if (_this.searchWord.trim() === \"\") {\r\n        _this.searchList.splice(0, _this.searchList.length);\r\n        map.centerAndZoom(\r\n          new BMap.Point(_this.startPoint.x, _this.startPoint.y),\r\n          _this.zoom\r\n        ); //空输入时回到最开始地图位置状态\r\n      } else {\r\n        _this.searchList.splice(0, _this.searchList.length);\r\n        myValue = _this.searchWord;\r\n        setPlace();\r\n      }\r\n    });\r\n\r\n    common.getById(tipBox).addEventListener(\"click\", function (e) {\r\n      //通过提示列表点击检索\r\n      myValue = e.target.innerText;\r\n      setPlace();\r\n      _this.searchList.splice(0, _this.searchList.length);\r\n    });\r\n  },\r\n  destroyed() {\r\n    this.socket.onclose = this.wsClose;\r\n  },\r\n  methods: {\r\n    checkValue(e) {\r\n      //检查为空的话就清空提示数组\r\n      // const {\r\n      // \tvalue\r\n      // } = e.target;\r\n      // console.log(value)\r\n      if (this.searchWord == \"\") {\r\n        this.searchList.splice(0, this.searchList.length);\r\n      }\r\n    },\r\n    wsInit() {\r\n      if (!WebSocket) {\r\n        console.log(\"Your browser do not apply WebSocket!\");\r\n      } else {\r\n        this.socket = new WebSocket(this.path); //socket实例\r\n        this.socket.onopen = this.wsOpen; //socket开启\r\n        this.socket.onerror = this.wsError; //socket错误\r\n        this.socket.onmessage = this.wsGetMsg; //socket消息\r\n      }\r\n    },\r\n    wsOpen() {\r\n      console.log(\"WebSocket连接成功!\");\r\n      this.socket.send('tranmap客户端已连接WebSocket服务!');\r\n    },\r\n    wsError() {\r\n      console.log(\"WebSocket连接错误!正在重连...\");\r\n      this.wsInit();  //连接失败则重连\r\n    },\r\n    wsGetMsg(msg) {\r\n      // console.log(msg.data);\r\n      this.wsData = JSON.parse(msg.data);\r\n    },\r\n    wsSend(content) {\r\n      this.socket.send(content);\r\n    },\r\n    wsClose() {\r\n      this.socket.close();\r\n      this.socket = undefined;\r\n      console.log(\"WebSocket连接关闭!\");\r\n      this.socket.send('连接断开');\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n#tranmap {\r\n  width: 100%;\r\n  height: 90%;\r\n  position: absolute;\r\n  z-index: 100;\r\n}\r\n\r\n#tranSortBox {\r\n  width: 600px;\r\n  height: 400px;\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: 5px;\r\n  background-color: rgba(255, 255, 255, 0.5);\r\n  border: 3px solid skyblue;\r\n  border-radius: 0 10px 10px 0;\r\n  z-index: 101;\r\n}\r\n\r\n#searchBox {\r\n  display: flex;\r\n  width: 260px;\r\n  padding-top: 5px;\r\n  position: relative;\r\n  margin: 0 auto;\r\n  font-size: 0;\r\n  z-index: 101;\r\n}\r\n\r\n#searchBox #searchInput {\r\n  flex: 1;\r\n  width: 200px;\r\n  height: 47px;\r\n  line-height: 27px;\r\n  padding: 8px 52px 8px 12px;\r\n  font-size: 16px;\r\n  color: black;\r\n  font-weight: bold;\r\n  letter-spacing: 1px;\r\n  border: 2px solid skyblue;\r\n  border-right: none;\r\n  border-radius: 12px;\r\n  background: #fff;\r\n  outline: none;\r\n  z-index: 101;\r\n}\r\n\r\n#searchBox #searchInput:focus {\r\n  transition: border linear 1s;\r\n  border-color: rgba(141, 39, 142, 0.75);\r\n  box-shadow: 0 0 18px rgba(38, 130, 188, 0.3);\r\n}\r\n\r\n#searchBox label {\r\n  flex: 1;\r\n  display: flex;\r\n  position: absolute;\r\n  right: -7px;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 45px;\r\n  height: 43px;\r\n  background-color: #eee;\r\n  border: 2px solid skyblue;\r\n  border-left: none;\r\n  border-radius: 0 12px 12px 0;\r\n  cursor: pointer;\r\n  z-index: 102;\r\n}\r\n\r\n#searchBox label:hover {\r\n  background-color: #ddd;\r\n  border-color: rgba(141, 39, 142, 0.75);\r\n  box-shadow: 14px 0 20px rgba(38, 130, 188, 0.3);\r\n}\r\n\r\n#searchBox #tipBox {\r\n  position: absolute;\r\n  top: 60px;\r\n  width: 219px;\r\n  height: auto;\r\n  max-height: 550px;\r\n  overflow: auto;\r\n  background: #fff;\r\n  border: 1px solid #e4e6e7;\r\n  box-shadow: 0 0 30px #aaa;\r\n}\r\n\r\n#searchBox #tipBox::before {\r\n  content: \"\";\r\n  border: 7px solid transparent;\r\n  border-bottom-color: skyblue;\r\n  position: absolute;\r\n  left: 5px;\r\n  top: -14px;\r\n}\r\n\r\n#searchBox #tipBox .searchItem {\r\n  display: inline-block;\r\n  width: 199px;\r\n  height: auto;\r\n  line-height: 30px;\r\n  color: #666;\r\n  padding: 0 10px;\r\n  border-bottom: 2px solid #e4e6e7;\r\n  font-size: 15px;\r\n  cursor: pointer;\r\n}\r\n\r\n#searchBox #tipBox .searchItem:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n#searchBox #tipBox .searchItem:hover {\r\n  background: #eee;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/bmap/tranmap.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"tranmap\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"tranSortBox\"}},[_c('tranSort',{attrs:{\"wsData\":_vm.wsData}})],1),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"searchBox\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchWord),expression:\"searchWord\"}],attrs:{\"type\":\"search\",\"id\":\"searchInput\",\"size\":\"20\",\"placeholder\":\"请输入检索地点\"},domProps:{\"value\":(_vm.searchWord)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.searchWord=$event.target.value},_vm.checkValue]}}),_vm._v(\" \"),_c('label',{attrs:{\"id\":\"searchBtn\"}},[_c('svg',{staticClass:\"icon\",attrs:{\"t\":\"1648187269632\",\"viewBox\":\"0 0 1024 1024\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"p-id\":\"5334\",\"width\":\"18\",\"height\":\"18\"}},[_c('path',{attrs:{\"d\":\"M1004.8 915.2l-243.2-243.2c0 0-6.4-6.4-6.4-6.4C800 595.2 832 505.6 832 416 832 185.6 646.4 0 416 0S0 185.6 0 416 185.6 832 416 832c89.6 0 179.2-32 243.2-83.2 0 6.4 6.4 6.4 6.4 6.4l243.2 243.2c25.6 25.6 70.4 25.6 96 6.4C1030.4 979.2 1030.4 940.8 1004.8 915.2zM64 416C64 224 224 64 416 64S768 224 768 416 608 768 416 768 64 608 64 416z\",\"p-id\":\"5335\",\"fill\":\"#aaaaaa\"}})])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchList.length),expression:\"searchList.length\"}],attrs:{\"id\":\"tipBox\"}},_vm._l((_vm.searchList),function(item,index){return _c('span',{key:index,staticClass:\"searchItem\"},[_c('svg',{staticClass:\"icon\",attrs:{\"t\":\"1648187269632\",\"viewBox\":\"0 0 1024 1024\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"p-id\":\"5334\",\"width\":\"14\",\"height\":\"14\"}},[_c('path',{attrs:{\"d\":\"M1004.8 915.2l-243.2-243.2c0 0-6.4-6.4-6.4-6.4C800 595.2 832 505.6 832 416 832 185.6 646.4 0 416 0S0 185.6 0 416 185.6 832 416 832c89.6 0 179.2-32 243.2-83.2 0 6.4 6.4 6.4 6.4 6.4l243.2 243.2c25.6 25.6 70.4 25.6 96 6.4C1030.4 979.2 1030.4 940.8 1004.8 915.2zM64 416C64 224 224 64 416 64S768 224 768 416 608 768 416 768 64 608 64 416z\",\"p-id\":\"5335\",\"fill\":\"#aaaaaa\"}})]),_vm._v(\" \"),_c('b',{staticStyle:{\"font-weight\":\"bolder\"}},[_vm._v(_vm._s(item.province)+_vm._s(item.city))]),_vm._v(_vm._s(item.district)+_vm._s(item.street)+_vm._s(item.business)+\"\\n      \")])}),0)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-9490efc4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/bmap/tranmap.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9490efc4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tranmap.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tranmap.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tranmap.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9490efc4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./tranmap.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-9490efc4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/bmap/tranmap.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}